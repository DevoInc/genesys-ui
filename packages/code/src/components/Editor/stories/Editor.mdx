import { Meta, Canvas, ArgTypes, Source } from '@storybook/blocks';

import { Editor } from '../';

import * as Stories from './Editor.stories';
import * as CaseStories from './Editor.cases.stories';

<Meta title="Components/Code/Editor/Docs" />

# Editor

## Overview

React implementation of [**monaco editor**](https://microsoft.github.io/monaco-editor/).

<Canvas of={Stories.Base} sourceState="none" />

## How to import

<Source
  code={`
import { Editor } from '@devoinc/genesys-ui-code';
`}
/>

## Basic usage

Using the predefined editor is as simple as importing the 'Editor' tag.

<Source
  code={`
import * as React from 'react';
import { Editor } from '@devoinc/genesys-ui-code';

export const MyEditor = () => <Editor value="I'm smart!" />
`}
/>

## Advanced usage

For more specific customizations, the Editor can also be constructed from its individual components.

<Source
  code={`
import * as React from 'react';
import { useTheme } from 'styled-components';

import { IconButton } from '@devoinc/genesys-ui';
import { Editor, useEditorTheme } from '@devoinc/genesys-ui-code';

export const CustomThemed = () => {
  const theme = useTheme();
  const editorTheme = useEditorTheme(theme);

  return (
    <Editor.Container bordered={true}>
      <Editor.Editor
        height="300px"
        bordered={true}
        theme={editorTheme}
        value="I'm being built from my inner parts"
      />
      <Editor.ActionsContainer>
        <IconButton icon="gi-heart_full" />
      </Editor.ActionsContainer>
    </Editor.Container>
  );
};
`}
/>

## Hooks

### useEditor

If the React tag doesn't suit a particular use case, the Editor can also be integrated using the 'useEditor' hook.

<Source code={`
import * as React from 'react';
import { useTheme } from 'styled-components';
import { Box, IconButton } from '@devoinc/genesys-ui';
import {
  Editor,
  useEditorTheme,
  useEditor,
} from '@devoinc/genesys-ui-code';

export const CustomThemed = () => {
  const theme = useTheme();
  const editorTheme = useEditorTheme(theme);

  const { containerRef } = useEditor({
    originalValue: 'Hey there!',
    modifiedValue: 'Hey hey!',
    theme: editorTheme,
    language: '',
    beforeMount: () => console.log('beforeMount'),
    onMount: () => console.log('onMount'),
    onChange: () => console.log('onChange'),
    onValidate: () => console.log('onValidate'),
    options: {},
  });

  return (
    <Editor.Container>
      <Box ref={containerRef} height="100%" />
      <Editor.ActionsContainer>
        <IconButton icon="gi-heart_full" />
      </Editor.ActionsContainer>
    </Editor.Container>
  );
};
`} />

## Custom Configurations

Here are some of the most common configurations.

### Readonly mode

<Canvas of={Stories.ReadonlyMode} />

### With Minimap

<Canvas of={Stories.WithMinimap} />

### Without line numbers

<Canvas of={Stories.WithoutLineNumbers} />

### Smaller text size

<Canvas of={Stories.SmallerTextSize} />

## Cases

The Editor can be extensively customized to accommodate even the most complex use cases.

### Custom Language With Validation

Visit [stories/cases/CustomLang.tsx](https://github.com/DevoInc/genesys-ui/blob/master/packages/code/src/components/Editor/stories/cases/CustomLang.tsx) for a code example.

<Canvas of={CaseStories.CustomLanguageWithValidation} sourceState="none" />

### With Actions

Visit [stories/cases/Actions.tsx](https://github.com/DevoInc/genesys-ui/blob/master/packages/code/src/components/Editor/stories/cases/Actions.tsx) for a code example.

<Canvas of={CaseStories.WithActions} sourceState="none" />

### Programatic Actions

Visit [stories/cases/Programatic.tsx](https://github.com/DevoInc/genesys-ui/blob/master/packages/code/src/components/Editor/stories/cases/Programatic.tsx) for a code example.

<Canvas of={CaseStories.ProgramaticActions} sourceState="none" />

### With Shortcuts

Visit [stories/cases/Shortcuts.tsx](https://github.com/DevoInc/genesys-ui/blob/master/packages/code/src/components/Editor/stories/cases/Shortcuts.tsx) for a code example.

<Canvas of={CaseStories.WithShortcuts} sourceState="none" />

### Custom Theme

Visit [stories/cases/CustomTheme.tsx](https://github.com/DevoInc/genesys-ui/blob/master/packages/code/src/components/Editor/stories/cases/CustomTheme.tsx) for a code example.

<Canvas of={CaseStories.CustomTheme} sourceState="none" />

### Multiple Editors

Visit [stories/cases/MultipleEds.tsx](https://github.com/DevoInc/genesys-ui/blob/master/packages/code/src/components/Editor/stories/cases/MultipleEds.tsx) for a code example.

<Canvas of={CaseStories.MultipleEditors} sourceState="none" />

## Props

<ArgTypes of={Stories} />

## Subcomponents

The Editor is made up of 3 main components:

### Editor.Container

Container of the editor.

<ArgTypes of={Editor.Container} />

### Editor.Editor

Actual editor. Uses `useEditor` under the hood.

<ArgTypes of={Editor.Editor} />

### Editor.ActionsContainer

Placement element for positioning floating actions in the editor.

<ArgTypes of={Editor.ActionsContainer} />

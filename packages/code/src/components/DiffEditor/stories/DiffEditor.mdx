import { Meta, Canvas, ArgTypes, Source } from '@storybook/blocks';

import { DiffEditor } from '../';

import * as Stories from './DiffEditor.stories';
import * as CaseStories from './DiffEditor.cases.stories';

<Meta title="Components/Code/DiffEditor/Docs" />

# Smart DiffEditor

## Overview

React implementation of [**monaco Diffeditor**](https://microsoft.github.io/monaco-Diffeditor/).

## How to import

<Source
  code={`
import { DiffEditor } from '@devoinc/genesys-ui-code';
`}
/>

## Basic usage

Using the predefined Diffeditor is as simple as importing the 'DiffEditor' tag.

<Source
  code={`
import * as React from 'react';
import { DiffEditor } from '@devoinc/genesys-ui-code';

export const MyDiffEditor = () => <DiffEditor value="I'm smart!" />
`}
/>

<Canvas of={Stories.Base} />

## Advanced usage

For more specific customizations, the DiffEditor can also be constructed from its individual components.

<Source
  code={`
import * as React from 'react';
import { useTheme } from 'styled-components';

import { Button } from '@devoinc/genesys-ui';
import { DiffEditor, getTheme } from '@devoinc/genesys-ui-code';
  
export const MyDiffEditor = () => {
  const theme = useTheme();
  return (
    <DiffEditor.Container height="300px">
      <DiffEditor.DiffEditor
        theme={getTheme(theme)}
        value="I'm being built from my inner parts"
      />
      <DiffEditor.ActionsContainer>
        <Button>Submit</Button>
      </DiffEditor.ActionsContainer>
    </DiffEditor.Container>
  );
};
`}
/>

## Hooks

### useDiffEditor

If the React tag doesn't suit a particular use case, the DiffEditor can also be integrated using the 'useDiffEditor' hook.

<Source code={`
import * as React from 'react';
import { useTheme } from 'styled-components';

import { DiffEditor, getTheme, useDiffEditor } from '@devoinc/genesys-ui-code';

export const MyDiffEditor = () => {
  const theme = useTheme();

const { containerRef } = useDiffEditor({
value,
theme,
language,
beforeMount,
onMount,
onChange,
onValidate,
options,
});

return (

<DiffEditor.Container>
  <div ref={containerRef} />
  <DiffEditor.ActionsContainer>{actions}</SmartDiffEditor.ActionsContainer>
</DiffEditor.Container>
); }; `} />

## Custom Configurations

Here are some of the most common configurations.

### Readonly mode

<Canvas of={Stories.ReadonlyMode} />

### With Minimap

<Canvas of={Stories.WithMinimap} />

### Without line numbers

<Canvas of={Stories.WithoutLineNumbers} />

### Smaller text size

<Canvas of={Stories.SmallerTextSize} />

## Cases

The DiffEditor can be extensively customized to accommodate even the most complex use cases.

### Custom Language

Visit [stories/cases/CustomLang.tsx](https://github.com/DevoInc/genesys-ui/blob/master/packages/code/src/stories/cases/CustomLang.tsx) for a code example.

<Canvas of={CaseStories.CustomLanguage} sourceState="none" />

### With Actions

Visit [stories/cases/Actions.tsx](https://github.com/DevoInc/genesys-ui/blob/master/packages/code/src/stories/cases/Actions.tsx) for a code example.

<Canvas of={CaseStories.WithActions} sourceState="none" />

### Programatic Actions

Visit [stories/cases/Programatic.tsx](https://github.com/DevoInc/genesys-ui/blob/master/packages/code/src/stories/cases/Programatic.tsx) for a code example.

<Canvas of={CaseStories.ProgramaticActions} sourceState="none" />

### With Shortcuts

Visit [stories/cases/Shortcuts.tsx](https://github.com/DevoInc/genesys-ui/blob/master/packages/code/src/stories/cases/Shortcuts.tsx) for a code example.

<Canvas of={CaseStories.WithShortcuts} sourceState="none" />

### Multiple DiffEditors

Visit [stories/cases/MultipleEds.tsx](https://github.com/DevoInc/genesys-ui/blob/master/packages/code/src/stories/cases/MultipleEds.tsx) for a code example.

<Canvas of={CaseStories.MultipleDiffEditors} sourceState="none" />

### Diff DiffEditor

Visit [stories/cases/MultipleEds.tsx](https://github.com/DevoInc/genesys-ui/blob/master/packages/code/src/stories/cases/DiffEd.tsx) for a code example.

<Canvas of={CaseStories.DiffDiffEditor} sourceState="none" />

## Props

<ArgTypes of={Stories} />

## Subcomponents

The DiffEditor is made up of 3 main components:

### DiffEditor.Container

Container of the Diffeditor.

<ArgTypes of={DiffEditor.Container} />

### DiffEditor.DiffEditor

Actual Diffeditor. Uses `useDiffEditor` under the hood.

<ArgTypes of={DiffEditor.DiffEditor} />

### DiffEditor.ActionsContainer

Placement element for positioning floating actions in the Diffeditor.

<ArgTypes of={DiffEditor.ActionsContainer} />
